<div class="container mx-auto p-4">
  <h2 class="text-2xl font-bold mb-6">Moje kampanie</h2>

  <button
    class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 mb-6"
    (click)="openAddModal()"
  >
    Dodaj kampaniÄ™
  </button>

  <ng-container *ngIf="!(isLoading$ | async); else loading">
    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
      <app-campaign
        *ngFor="let campaign of campaigns$ | async"
        [campaign]="campaign"
        (onEdit)="openEditModal($event)"
        (onDelete)="openDeleteConfirmation($event)"
      ></app-campaign>
    </div>
  </ng-container>

  <ng-template #loading>
    <div class="flex justify-center items-center h-32">
      <lucide-icon
        [img]="LoaderIcon"
        class="animate-spin text-green-600"
        size="32"
      ></lucide-icon>
    </div>
  </ng-template>
  <app-modal *ngIf="showModal" (close)="closeModal()">
    <ng-container [ngSwitch]="modalContent">
      <app-add-campaign
        *ngSwitchCase="'add'"
        (closeModal)="closeModal()"
      ></app-add-campaign>

      <app-edit-campaign
        *ngSwitchCase="'edit'"
        [campaign]="selectedCampaign!"
        (closeModal)="closeModal()"
      ></app-edit-campaign>

      <div *ngSwitchCase="'confirmDelete'" class="p-4">
        <h2 class="text-lg font-bold mb-4">Confirm Delete</h2>
        <p>Are you sure you want to delete this campaign?</p>
        <div class="flex justify-end mt-4">
          <button (click)="closeModal()" class="bg-gray-300 px-4 py-2 rounded mr-2">Cancel</button>
          <button (click)="deleteCampaign()" class="bg-red-500 text-white px-4 py-2 rounded">Delete</button>
        </div>
      </div>
    </ng-container>
  </app-modal>
</div>
